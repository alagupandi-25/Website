<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{AdminLayout.html}">
<head>
    <title>Event Form</title>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body>
    <section layout:fragment="content" class="section">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Event Form</h5>
                        <form th:object="${Events}" th:action="@{/admin/events/add}" method="post" enctype="multipart/form-data" id="eventForm">
                            <!-- Title Input -->
                            <div class="row mb-3">
                                <label for="title" class="col-sm-2 col-form-label">Title</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" th:field="*{title}" id="title" required>
                                </div>
                            </div>
                            <!-- Description Editor -->
							<div class="row mb-5">
							    <label for="description" class="col-sm-2 col-form-label">Description</label>
							    <div class="col-sm-10">
							        <div class="quill-editor-full"></div>
							        <textarea th:field="*{description}" id="description" style="display:none;"></textarea>
							    </div>
							</div>
                            <!-- File Upload -->
                            <div class="row mb-3">
                                <label for="formFile" class="col-sm-2 col-form-label">File Upload</label>
                                <div class="col-sm-10">
                                    <input class="form-control" type="file" id="formFile" th:field="*{files}" multiple>
                                </div>
                            </div>

                            <!-- Email Input -->
                            <div class="row mb-3">
                                <label for="inputEmail" class="col-sm-2 col-form-label">Email</label>
                                <div class="col-sm-10">
                                    <input type="email" class="form-control" th:field="*{email}" id="inputEmail" required>
                                </div>
                            </div>
                            <!-- Phone Number Input -->
                            <div class="row mb-3">
                                <label for="phoneNumber" class="col-sm-2 col-form-label">Phone Number</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" th:field="*{phoneNumber}" id="phoneNumber" maxlength="20">
                                </div>
                            </div>
                            <!-- Event Date and Time -->
                            <div class="row my-3">
                                <label for="inputDateTime" class="col-sm-2 col-form-label">Event Date and Time</label>
                                <div class="col-sm-10">
                                    <input type="datetime-local" class="form-control" th:field="*{eventdate}" id="inputDateTime">
                                </div>
                            </div>

                            <!-- Total Days -->
                            <div class="row mb-3">
                                <label for="totaldays" class="col-sm-2 col-form-label">Total Days</label>
                                <div class="col-sm-10">
                                    <input type="number" class="form-control" th:field="*{totaldays}" id="totaldays">
                                </div>
                            </div>

                            <!-- Status Radio Buttons -->
                            <fieldset class="row mb-3">
                                <legend class="col-form-label col-sm-2 pt-0">Status</legend>
                                <div class="col-sm-10">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" th:field="*{status}" value="Pending" id="gridRadios1" required>
                                        <label class="form-check-label" for="gridRadios1">Pending</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" th:field="*{status}" value="Ongoing" id="gridRadios2" required>
                                        <label class="form-check-label" for="gridRadios2">Ongoing</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" th:field="*{status}" value="Completed" id="gridRadios3" required>
                                        <label class="form-check-label" for="gridRadios3">Completed</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" th:field="*{status}" value="Cancelled" id="gridRadios4" required>
                                        <label class="form-check-label" for="gridRadios4">Cancelled</label>
                                    </div>
                                </div>
                            </fieldset>

                            <!-- Submit Button -->
                            <div class="row mb-3">
                                <div class="col-sm-10 offset-sm-2">
                                    <button type="submit" class="btn btn-primary">Update</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Initialize Quill editor
            var quill = new Quill('#editor', {
                theme: 'snow'
            });

            // Handle form submission
            document.getElementById("eventForm").addEventListener("submit", function(event) {
                event.preventDefault(); 
                const formData = new FormData(this);
                formData.set('description', quill.root.innerHTML); 
                fetch(this.action, {
                    method: 'POST',
                    body: formData
                })
                .then(response => {
                   
                        window.location.href = '/admin/events';
                    
                })
                .catch(error => {
					window.location.href = '/admin/events';
					                   
                });
            });
        });
    </script>
</body>
</html>
